import

interface

namespace std

func sin_f: f64_t -> f64_t proto

func little_gauss_f: i32_t -> i32_t proto

type i32_pair_t: [
  first: *i32_t ,
  second: i32_t ,
]

func foo_f: i32_pair_t -> i32_t proto

func bar_f: [] -> [] proto

func main_f: [ i32_t, other: i32_t, ] -> i32_t proto

func test_f: [ i32_t, ] proto

implementation

func little_gauss_f: -*-
{
  retval = 0;
  i = 0;
  loop {
    i += 1;
    retval += i;
    if ( i >= arg ) {
      break;
    };
  };
}

func foo_f: -*-
{
  if ( a < 0 ) {
    retval = first * second ;
  } else if ( b > 0) {
    retval = first + second ;
  } else {
    retval = first - second;
  };
  if ( a > b ) {
    retval = first or second;
  };
  retval = 42 ;
}

func main_f: -*-
{
  retval = [ arg.0 , arg.1 , ] ;
  retval = 2 ;
  getval = [ 10, 100, ] ;
}

func test_f: -*-
{
  [ 10, 100 , ] | std.foo ;
  ( [ 10, 100, ] | std.foo == 110 ) | assert ;
  ( [ 20, 300, ] | std.foo == 320 ) | assert ;
}
